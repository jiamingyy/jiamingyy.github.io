<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【FPGA】verilog语法基础 | NOTE</title>
    <meta name="description" content="向着200w进发！">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/assets/style.BLoGC-09.css" as="style">
    
    <script type="module" src="/assets/app.Bem7RWkW.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.jNYx5HCL.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DWZwO2WB.js">
    <link rel="modulepreload" href="/assets/posts_【FPGA】Verilog基础.md.DPdzVSZ4.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle" data-v-9fd4d1dd data-v-0ad69264><a class="title" href="/" data-v-0ad69264><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo_main.png" alt data-v-ab19afbb><!--]--><span data-v-0ad69264>NOTE</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/category.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Category</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/archives.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Archives</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/tags.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Tags</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/about.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>About</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/jiamingyy" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/jiamingyy" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>目录</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--[--><!--[--><div style="padding-top:20px;" class="post-info"> 发布时间：2022-03-17    <!--[--><span><a class="mx-2 text-xs bg-amber-300 p-1 rounded-sm dark:bg-slate-500 text-gray-100" href="/pages/tags.html?tag=数字电路">数字电路</a></span><span><a class="mx-2 text-xs bg-amber-300 p-1 rounded-sm dark:bg-slate-500 text-gray-100" href="/pages/tags.html?tag=FPGA">FPGA</a></span><span><a class="mx-2 text-xs bg-amber-300 p-1 rounded-sm dark:bg-slate-500 text-gray-100" href="/pages/tags.html?tag=Verilog">Verilog</a></span><!--]--></div><!--]--><!--]--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _posts_%E3%80%90FPGA%E3%80%91Verilog%E5%9F%BA%E7%A1%80" data-v-e6f2a212><div><p>学习Verilog的基本语法.</p><h2 id="电路的描述方式" tabindex="-1">电路的描述方式 <a class="header-anchor" href="#电路的描述方式" aria-label="Permalink to &quot;电路的描述方式&quot;">​</a></h2><p>verilog是描述电路的语言。为了实现系统的逻辑功能，在设计系统时可以采用多种描述方式进行建模。<code>verilog</code>通常使用三种不同的风格描述电路。在设计电路的时候可以任意使用一种或混合使用多种描述方式来描述电路。经过综合工具综合后的结果一般都是门级结构描述。</p><ol><li>**结构描述方式：**调用其他已经定义好的低层模块对整个电路功能进行描述，或者直接调用<code>verilog</code>内部基本的门级元件描述电路的结构。</li><li>**数据流描述方式：**设计者从数据在各存储单元之间进行流动和运算的角度对电路的功能进行描述。设计者可以使用<code>verilog</code>提供的高层次运算符，例如 <code>+</code>等直接对数据进行高层次的数学逻辑运算建模，而不用关心具体的门级电路结构。</li><li>**行为描述方式：**直接根据电路的外部行为进行建模，与具体的硬件电路无关。</li></ol><h2 id="信号声明方式" tabindex="-1">信号声明方式 <a class="header-anchor" href="#信号声明方式" aria-label="Permalink to &quot;信号声明方式&quot;">​</a></h2><h3 id="数字表示方法" tabindex="-1">数字表示方法 <a class="header-anchor" href="#数字表示方法" aria-label="Permalink to &quot;数字表示方法&quot;">​</a></h3><p>整形数字的定义格式为</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[-][&lt;位宽&gt;]&#39;&lt;进制&gt;&lt;数值&gt;</span></span></code></pre></div><p>其中进制的标识符分别为：二进制（b或B）、八进制（o或O）十进制（d或D）、十六进制（h或H）。若省略进制则默认为十进制。</p><p><em>负号的标识需要在位宽的前面</em></p><p>数值还可以使用符号表示不定态</p><ul><li>x（X）表示未知状态</li><li>z（Z，？）表示高阻态</li></ul><p>一个 <code>x</code>或<code>z</code>可以分别表示十六进制中的四位，八进制中的三位，二进制的一位</p><h3 id="变量数据类型" tabindex="-1">变量数据类型 <a class="header-anchor" href="#变量数据类型" aria-label="Permalink to &quot;变量数据类型&quot;">​</a></h3><p><code>verlog</code>中的常量有三种类型</p><ol><li><code>parameter</code></li><li><code>wire</code></li><li><code>reg</code></li></ol><ul><li><p><code>parameter</code>类型</p><p><code>parameter</code>用于定义在不变的值，例如状态机中的状态、数学运算中的常数等。常量的类型包括三种：</p><ul><li>整数型常量 （可逻辑综合）</li><li>实数型常量 （用于逻辑仿真）</li><li>字符串型常量 （用于逻辑仿真）</li></ul><p>声明方式如下：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">parameter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4&#39;b10x0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 4位二进制，第二位为不定值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">parameter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12&#39;dz</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 12位十进制，全位为高阻态</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">parameter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8&#39;h4x</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			// 8位十六进制，低4位为不定值</span></span></code></pre></div></li><li><p><code>wire</code>类型</p><p>线网类型代表各个模块之间的物理连线，不能存储逻辑值，它的值由它的驱动元件决定，线网类型的默认值为高阻态z。<code>verilog</code>中所有的输入输出信号类型默认均为<code>wire</code>类型。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">wire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [位宽] 线网名称;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 声明例子</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">wire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a;				</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义一个 1位 的wire</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">wire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] b;		</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义一个8 位的wire</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">wire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] c, d;	</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义一个4 位的wire</span></span></code></pre></div></li><li><p><code>reg</code>类型</p><p>寄存器类型表示一个抽象的数据存储单元，它具有状态保存作用。寄存器类型只能在<code>initial</code>和<code>always</code>内部被赋值。在赋值前默认值为<code>x</code>。对于<code>reg</code>类型，赋值语句的作用就像改变一组触发器的存储单元的值。可以用各种构造控制改变值的时机，如上升沿、下降沿等。单个<code>reg</code>类型的声明格式如下，其中的 n 代表寄存器的位宽。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [位宽] 寄存器名称;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] a;		</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 声明一个 4 位的寄存器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] b;		</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 声明一个 4 位的寄存器</span></span></code></pre></div></li></ul><p>$ git config --global init.defaultBranch main$ git branch -M main # 如果是已经新建了的仓库，修改当前的分支名称为 mainshell</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[msb:lsb] name;</span></span></code></pre></div><p>上面的<code>msb</code>和<code>lsb</code>分别代表向量的最高有效位和最低有效位。<code>msb</code>和<code>lsb</code>必须为常数、常数表达式或者parameter参数。</p><h3 id="变量数组" tabindex="-1">变量数组 <a class="header-anchor" href="#变量数组" aria-label="Permalink to &quot;变量数组&quot;">​</a></h3><p>线网和变量都可以声明为一个数组，数组中的每个元素可以是标量也可以是向量。数组的定义格式为：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">数据类型 [位宽] 变量名称[地址范围]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 例子</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">wire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bus[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]; 			</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//声明 6个位宽为 1 的wire 类型数组</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] data[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]; 	</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 声明4个位宽为7 的reg 类型数组</span></span></code></pre></div><p>通过使用下标可以访问数组中特定的单元</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8&#39;hff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p><strong>助记：</strong></p><p>位宽写在<code>wire</code>或者<code>reg</code>关键字后面则表示位宽，变量名后面则表示数组大小。如果位宽不写，则默认为1。</p><h2 id="运算符" tabindex="-1">运算符 <a class="header-anchor" href="#运算符" aria-label="Permalink to &quot;运算符&quot;">​</a></h2><p>verilog中支持的运算符与c语言中的运算符基本一致，但是由于<code>verilog</code>支持不定值的赋值方式，所以某些运算符的运算结果可能会不太一样。而且还有<code>verilog</code>中的所特有的运算符这里也会列出来。</p><h3 id="算术运算" tabindex="-1">算术运算 <a class="header-anchor" href="#算术运算" aria-label="Permalink to &quot;算术运算&quot;">​</a></h3><ol><li>在进程整数除法运算时，结果要略去小数的部分只取整数部分。</li><li>在进行取模运算时结果的符号位与第一个操作数的符号位一致。</li></ol><p><strong>注意：当所运算的操作数中含有不确定的值<code>x</code>或者<code>z</code>时算数运算的结果也是不确定的</strong></p><h3 id="逻辑运算" tabindex="-1">逻辑运算 <a class="header-anchor" href="#逻辑运算" aria-label="Permalink to &quot;逻辑运算&quot;">​</a></h3><ol><li><code>! &amp;&amp; ||</code>这三个逻辑运算符只有作用于 全 0 的操作数时才认为该操作数具有逻辑零的值，操作数中有任意多个1则认为该操作数为1，当操作数中含有<code>x</code>时则返回结果仍然为 <code>x</code>。</li><li>判断逻辑相等和不相等分为两种 ,逻辑相等<code>== !=</code>和逻辑全等<code>=== !==</code>，当进行<strong>相等运算</strong>时，两个操作数必须逐位相等，比较结果才为1（真），如果任意一个操作数含有不定态（X）或高祖态（Z），其相等比较的结果就会是不定值。进行<strong>全等运算</strong>时，对不定或高阻状态也进行比较，当两个操作数完全一致时，其结果才为1，否则为0.</li></ol><h3 id="位运算" tabindex="-1">位运算 <a class="header-anchor" href="#位运算" aria-label="Permalink to &quot;位运算&quot;">​</a></h3><ul><li><p>在使用<code>~ &amp; | ^ ^~</code>等位运算符时，若两个操作数的位宽不相等，则会自动将操作数在右端对齐，位数少的操作数相应的高位会使用0进行填充。</p></li><li><p>移位操作，移位操作分为两种，移位运算符 <code>&gt;&gt;</code>，<code>&lt;&lt;</code>，<strong>算术移位运算符</strong><code>&lt;&lt;&lt;</code>,<code>&gt;&gt;&gt;</code>。</p><p>对于左移操作中出现的空位，都使用 0 开进行填充，在进行右移操作时，<strong>算术移位会使用符号位进行填充</strong>。</p><p>需要注意<code>&gt;&gt;&gt;</code>作用于有符号数，左边会补符号位；<code>&lt;&lt;&lt;</code>作用于有符号数，右边补<code>0</code>，符号位也被移走；</p><p><strong>注意事项：</strong></p><p><em>左移会导致位宽增加，右移位宽不变。</em></p></li></ul><h3 id="拼接与缩位" tabindex="-1">拼接与缩位 <a class="header-anchor" href="#拼接与缩位" aria-label="Permalink to &quot;拼接与缩位&quot;">​</a></h3><p>下面列举<code>verilog</code>中所特有的运算符。</p><ul><li><p>拼接运算符：可以将两个或多个信号的某些为进行拼接表示一个整体信号。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 例子</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{a, b[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], w, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3&#39;b101</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将信号复制再进行拼接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{w}} </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 等同于 </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{w, w, w, w};</span></span></code></pre></div></li><li><p>缩位运算符：缩位运算符的符号与位运算符的符号一样，但缩位运算符是针对当个操作数的，对当个操作数从左到右按照位的顺序两两进行相应的运算。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4&#39;b0101</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a			</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a 			</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">^a			</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 0</span></span></code></pre></div></li></ul><h2 id="程序的基本结构" tabindex="-1">程序的基本结构 <a class="header-anchor" href="#程序的基本结构" aria-label="Permalink to &quot;程序的基本结构&quot;">​</a></h2><h3 id="结构化描述" tabindex="-1">结构化描述 <a class="header-anchor" href="#结构化描述" aria-label="Permalink to &quot;结构化描述&quot;">​</a></h3><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 这里演示全加器的实现</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可以按照以下格式声明端口</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输入输出方向 信号类型[位宽] 信号名;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">module</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fadder</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	i_A, i_B, i_Cin,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    o_S, o_C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i_A, i_B, i_Cin; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输入端口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> o_S, o_C; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输出端口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	parameter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s_delay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, c_delay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义两个参数，参数也可以代表常量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> #s_delay o_S </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i_A ^ i_B ^ i_Cin; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 延时s_delay </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> #c_delay o_C </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i_A ^ i_B) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i_Cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i_A </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i_B) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 延时c_delay </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endmodule</span></span></code></pre></div><p>当需要调用已经写好的模块或者IP时（类似于函数调用），需要例化模块，并传递信号。</p><p>例化模块的基本语法如下：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">模块名 实例名 (.端口名1(连线1), .端口名2(连线2), ...)；</span></span></code></pre></div><p><strong>注意事项：</strong></p><p>在顶层文件使用被调用模块的端口时，如果端口声明为<code>input</code>，则向该端口传递的信号可以是<code>wire</code>或者<code>reg</code>类型。如果端口声明为<code>output</code>，则向该端口传递的信号必须是<code>wire</code>类型。</p><p>一个完整地例化模块调用过程：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">module</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fadder_delay_1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	i_A, i_B, i_Cin,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    o_S, o_C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 实例化一个模块并设置其中的参数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 第一种方式</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    fadder</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> fadder_delay_1_ins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(.i_A(i_A), .i_B(i_B), .i_Cin(i_Cin), .o_S(o_S), o_C(o_C));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    defparam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fadder_delay_1_ins.s_delay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fadder_delay_1_ins.c_delay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 第二种方式</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    fadder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> #(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    	fadder_delay_1_ins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(.i_A(i_A), .i_B(i_B), .i_Cin(i_Cin), .o_S(o_S), o_C(o_C));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //第三种方式</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    fadder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> #(.s_delay(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),.c_delay(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    	fadder_delay_1_ins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(.i_A(i_A), .i_B(i_B), .i_Cin(i_Cin), .o_S(o_S), o_C(o_C));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endmodule</span></span></code></pre></div><h3 id="数据流描述" tabindex="-1">数据流描述 <a class="header-anchor" href="#数据流描述" aria-label="Permalink to &quot;数据流描述&quot;">​</a></h3><p>在使用数据流描述电路时通常使用连续赋值语句实现。连续赋值语句必须以 <code>assign</code>开头，出现在和门单元实例化相同的代码层次，它的结构为</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [delay] wire_type_var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">expression;</span></span></code></pre></div><p>使用数据流的方式描述一个4位的加法器</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">module</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> adder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] a, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] b, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cin, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] sum, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cout;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {cout,sum} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cin;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endmodule</span></span></code></pre></div><p>在进行逻辑综合时，综合器会自动优化综合出来的门电路。</p><h3 id="行为描述" tabindex="-1">行为描述 <a class="header-anchor" href="#行为描述" aria-label="Permalink to &quot;行为描述&quot;">​</a></h3><p>行为描述一般使用<code>initial</code>和<code>always</code>过程块结构。</p><ul><li><p>initial过程块</p><p>主要用于仿真测试，用来对变量进行初始化或者产生激励波形，过程块中的内容只会被执行一次，一个<code>module</code>可以有多个<code>initial</code>块结构，各个<code>initial</code>过程块之间并行运行。若块中的语句没有添加延时控制，则可以延时指定的时钟周期后再执行后续指令。</p><p><em>initial过程块不能进行逻辑综合</em></p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">initial</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	#延时数 行为语句; </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    #延时数 行为语句; </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ..</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 例子</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] a;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">initial</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4&#39;b0000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; 		</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 缺省为在0时刻执行该代码</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4&#39;b0001</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 	// 经过5个时间单位后执行赋值</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4&#39;b0010</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 	// 经过 10 个时间单位后执行赋值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div></li><li><p>always 过程块，always 过程块会一致被重复执行，多个<code>always</code>过程块并行执行，与书写顺序无关。</p><p><code>@</code>中包含的敏感信号可为电平触发或者逻辑变量触发，使用电平触发时可以使用 <code>posedge</code>和<code>negedge</code>表示上升沿和下降沿。</p><p>在<code>always</code>过程块中执行的赋值语句，等号左边必须为<code>reg</code>类型。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @ (敏感信号列表) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// always @(*) 代表任意信号变化(电平变化)时都会发生的操作</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    行为语句1;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    行为语句2;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 例子</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @ (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">posedge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clk)					</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 只在上升沿触发执行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @ (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">posedge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> negedge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clk)	</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在上升沿和下降沿都执行</span></span></code></pre></div></li></ul><h2 id="赋值方式" tabindex="-1">赋值方式 <a class="header-anchor" href="#赋值方式" aria-label="Permalink to &quot;赋值方式&quot;">​</a></h2><p>由于<code>verilog</code>程序所描述的是电路结构，具有天然的并行特性，因此对变量的赋值于软件编程语言存在非常大的不同。</p><p><strong>使用准则：</strong></p><ol><li>在描述组合逻辑的 <code>always</code> 块中使用阻塞赋值 <code>=</code>, 综合成组合逻辑电路结构，这种电路的输出结果只和输入的电平变化有关。</li><li>在描述时序逻辑的 <code>always</code>块中使用非阻塞赋值 <code>&lt;=</code>, 综合成时序逻辑电路结构，这种电路的结构往往和触发沿有关，当触发沿满足条件时才发生变化。</li></ol><p><strong>注意事项：</strong></p><ol><li>在同一个 always 块中不能混用阻塞赋值和非阻塞赋值</li><li>不允许在多个 always 块中对同一个变量进行赋值</li></ol><p>下面通过两个例子帮助理解两种赋值方式的不同。</p><h3 id="阻塞赋值" tabindex="-1">阻塞赋值 <a class="header-anchor" href="#阻塞赋值" aria-label="Permalink to &quot;阻塞赋值&quot;">​</a></h3><p>所谓阻塞的概念是指，在同一个always块中，<em>后面的赋值语句是在前一句赋值语句结束后才开始赋值的</em>。例如下面的示例</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">posedge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CLK_i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> negedge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RSTn_i)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RSTn_i)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        begin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        begin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span></code></pre></div><p>在复位结束后，有 <code>a = 1; b = 2; c = 3;</code></p><p>第一个上升沿到来的时候，有<code>a = 0; b = 0; c = 0;</code>，而后的结果就不会再发生变化了。</p><h3 id="非阻塞赋值" tabindex="-1">非阻塞赋值 <a class="header-anchor" href="#非阻塞赋值" aria-label="Permalink to &quot;非阻塞赋值&quot;">​</a></h3><p>所谓非阻塞的概念是指，在计算非阻塞赋值的RHS以及更新LHS期间，允许其他的非阻塞赋值语句同时计算RHS和更新LHS。</p><p><em>右边表达式是同一时间计算出来的，并同时更新左边的表达式， 即右边表达式通过组合逻辑计算出来后，马上所存到DFF中</em></p><p>备注： RHS - &gt; 右边的表达式； LHS - &gt; 左边的表达式；</p><ul><li><p><code>always</code>开始时，先计算右边表达式的值</p></li><li><p><code>always</code>结束后才更新左边表达式的值，只能下次<code>always</code>执行时才能感知到变量的变化</p></li></ul><p>将阻塞赋值的例子修改为：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">posedge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CLK_i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> negedge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RSTn_i)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RSTn_i)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        begin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        begin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span></code></pre></div><p>复位结束后，值与阻塞赋值相同，有 <code>a = 1; b = 2; c = 3;</code></p><p>当第一个上升沿到达时，有<code>a = 0; b = 1; c = 2;</code></p><p>当第二个上升沿到达时，有<code>a = 0; b = 0; c = 1;</code></p><p>当第三个上升沿到达时，有<code>a = 0; b = 0; c = 0;</code>，而后的结果就不会再发生变化了。</p><p>可以看到，当使用非阻塞赋值时，右侧的表达式的值是在同一时刻确定的，而阻塞赋值则存在一个先后次序关系。</p><h2 id="条件判断" tabindex="-1">条件判断 <a class="header-anchor" href="#条件判断" aria-label="Permalink to &quot;条件判断&quot;">​</a></h2><p>条件判断语句属于过程描述语句，不能单独用来描述组合逻辑电路，<code>if</code>和<code>case</code>语句只能出现在<code>always</code>语句内，如果需要使用条件判断语句描述组合逻辑电路，可以在<code>always @(*)</code>中进行书写，在综合时会生成多路选择器。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (w1)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // expression</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // expression</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (w2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        a1: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        a2: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    endcase</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>如果只含有一个判断变量可以使用三元表达式进行描述，在综合的时候会生成 一个 2选1 的多路选择器。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (c1) ? a1 : a2; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// c1 为真则选择 a1 输出，否则选择 a2</span></span></code></pre></div><p><strong>注意（避免生成Latch）：</strong></p><p>使用条件判断语句描述组合逻辑电路时需要对所有可能的情况都要进行描述描述，因为<code>verilog</code>对于没有指定条件的输出采用的”维持输出不变“的原则，此时就需要电路具有状态保持功能，但是组合逻辑电路中并没有”记忆原件“，因此就会在综合的时候为组合逻辑电路加上锁存器（Latch）以”记住“此时的状态。</p><h3 id="单分支" tabindex="-1">单分支 <a class="header-anchor" href="#单分支" aria-label="Permalink to &quot;单分支&quot;">​</a></h3><p>逻辑判断使用<code>if () ... else if () ... else</code> 语句表示。具体的语法和c 语言的差不多，这是在书写多条语句的时候需要使用 <code>begin ... end</code>括起来。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condition)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expression;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condistion1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expression1;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expression2;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condistion1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expression1;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condistion2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expression2;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expression3;</span></span></code></pre></div><h3 id="多分支" tabindex="-1">多分支 <a class="header-anchor" href="#多分支" aria-label="Permalink to &quot;多分支&quot;">​</a></h3><p>多条件判断时可以使用 <code>case</code> 语句，它的使用格式是</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (var)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            condition1: expression1;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            condition2: expression2;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            defualt: defualt_expression;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		endcase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 支持不定态的casex</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        casex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (in)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            4&#39;bxxx1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2&#39;d0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            4&#39;bxx10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2&#39;d1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            4&#39;bx100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2&#39;d2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            4&#39;b1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2&#39;d3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2&#39;d0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	endcase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span></code></pre></div><p>尽量避免使用 <code>casex</code>语句，可以使用<code>casez</code>语句。</p><p><strong>注意：</strong></p><ol><li>分支表达式的值互不相同</li><li>所有表达式的位宽必须相等，不3能使用 &#39;bx 代替 n&#39;bx</li><li>当不需要考虑 x 和 高阻时 使用 <code>casex ... endcase</code></li><li>当不需要考虑 高阻时 使用 <code>casez ... endcase</code></li><li>0 != x or z</li></ol><h2 id="循环语句" tabindex="-1">循环语句 <a class="header-anchor" href="#循环语句" aria-label="Permalink to &quot;循环语句&quot;">​</a></h2><p>软件开发的高级语言大多提供了<code>for</code>或<code>while</code>等循环流程控制语句。<code>verilog</code>中也提供了<code>for</code>语句，但是在HDL语言中，循环执行的操作一般通过时序逻辑电路完成，<code>for</code>语句一般只用在testbench 中进行数据生成，在RTL编程中很少进行使用。</p><p>主要原因就是<code>for</code>循环会被综合器做并行展开，每个变量独立占用寄存器资源，如果不能很好地考虑运行逻辑，会造成资源的极大浪费。</p><p>常见使用格式如下：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] counter ;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">initial</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> begin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &#39;b0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        #10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1&#39;b1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h2 id="生成语句" tabindex="-1">生成语句 <a class="header-anchor" href="#生成语句" aria-label="Permalink to &quot;生成语句&quot;">​</a></h2><ol><li>批量生成语句</li></ol><p>2001标准中新加入的<code>generate</code>语句可以批量例化多个模块，并设置其中的连线。<code>genvar</code>声明了<code>generatate</code>块中使用的变量名。</p><p>具体格式如下：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">genvar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 标识变量</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">generate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(init; condistion; next)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:module_name</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // expression</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endgenerate</span></span></code></pre></div><p>可以看到<code>for</code>中的表达式和C语言中时一样的，只是关键字<code>begin</code>后面需要跟一个<code>module_name</code>，该名称指明了<code>generate</code>所生成模块的名称，可以通过<code>module_name[index]</code>的方式的访问实例化生成的模块。</p><p>例如:</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">genvar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">generate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 510</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :ut</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        relu110 u(.l(q[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), .c(q[i]), .r(q[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), .n(q_next[i])); </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endgenerate</span></span></code></pre></div><p><strong>注意：不能将<code>generate for</code>语句放在 <code>always</code>语句中</strong></p><ol start="2"><li>条件生成语句</li></ol><p>条件生成语句包括 <code>generate if </code>和<code>generate case</code>两种。</p><p><code>generate if</code>语句的格式</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">generate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condition) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Name1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//expression</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	end</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Name2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//expression</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endgenerate</span></span></code></pre></div><p><code>case</code> 语句的格式</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">generate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">constant_expression</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     	&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">label_1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                 &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     	&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">label_2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                 &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     	default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">label_3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                 &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	endcase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endgenerate</span></span></code></pre></div><p>注意： 这段表达是在编译时生效的，因此 condition 应该满足以下几个条件</p><ul><li><p>条件表达式必须是参数或宏定义。</p></li><li><p>条件表达式必须在编译时求值。</p></li></ul><ol start="3"><li>生成语句的嵌套</li></ol><p><code>generate for </code>语句中可以嵌套<code>if</code>和<code>case</code>语句用于判断，这样可以提升生成语句的灵活性。例如：</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">genvar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">generate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 511</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :ut</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            relu110 u(.l(q[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), .c(q[i]), .r(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1&#39;b0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), .n(q_next[i]));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 511</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            relu110 u(.l(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1&#39;b0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), .c(q[i]), .r(q[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), .n(q_next[i]));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            relu110 u(.l(q[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), .c(q[i]), .r(q[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), .n(q_next[i])); </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endgenerate</span></span></code></pre></div><h2 id="属性语法" tabindex="-1">属性语法 <a class="header-anchor" href="#属性语法" aria-label="Permalink to &quot;属性语法&quot;">​</a></h2><p>属性语法不直接影响模块的逻辑行为，但它们可以提供有关模块和其实例的信息，以帮助综合工具和其他工具正确处理设计。</p><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 告诉综合工具保留指定的信号或模块，即使它们似乎没有被使用, 方便进行调试查看</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> KEEP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TRUE&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 告诉综合工具不要修改指定的信号或模块，并且不要尝试进行优化。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DONT_TOUCH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TRUE&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-label="Permalink to &quot;函数&quot;">​</a></h2><div class="language-verilog vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">verilog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> func1(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pa) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	begin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // expresion</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 这是返回值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        func1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //expression; </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endfunction</span></span></code></pre></div><h2 id="常见技巧" tabindex="-1">常见技巧 <a class="header-anchor" href="#常见技巧" aria-label="Permalink to &quot;常见技巧&quot;">​</a></h2><ol><li>变量索引与部分选择</li></ol><p>part-select 即引用数组中一个元素的某几位。</p><p>例：<code>reg [9:0]</code> <code>a[9:0]</code> 引用第0个元素的后四位：<code>a[0][0+:4]</code> 或 <code>a[0][3-:4]</code>，其中 <code>-:</code>和<code>+:</code> <strong>左边可以是常数或者变量，右边必须是常数</strong>。(这个会很有用，可以省很多时间写部分索引)</p><ol start="2"><li><code>1’sb1</code>表示 -1，<code>1’sb0 </code>表示 0</li><li>单纯的十进制数为 32bit interger 有符号数</li><li><code>±</code>运算赋值运算 所有操作数是有符号数，那么结果才是有符号数。</li></ol><h2 id="编程规范" tabindex="-1">编程规范： <a class="header-anchor" href="#编程规范" aria-label="Permalink to &quot;编程规范：&quot;">​</a></h2><p>总结<code>verilog</code>的编程规范，一共10条。</p><ol><li>不要太多的 if—else 嵌套</li><li>不要编写过于庞大的状态机</li><li>复杂的状态机，可以采用 2 段式以上的实现</li><li>尽量使用时序逻辑完成编程</li><li>使用组合逻辑不要过于庞大</li><li>复杂代码拆分简单模块</li><li>复杂计算，增加流水设计</li><li>高速模块和低速模块搭配使用</li><li>case 语句一定有 default</li><li>组合逻辑有 if 必须有 else 防止产生锁存器，锁存器所以出毛刺</li></ol></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><!----><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>最新更新: <time datetime="2024-09-30T09:36:03.000Z" data-v-1bb0c8a8></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div><div class="site-footer"> MIT Licensed | Jiamingyy Copyright © 2022-present <br> Powered by <a class="vitepress" target="_blank" href="//vitepress.vuejs.org/">VitePress - 1.3.4</a> Theme by <a class="vitepress" target="_blank" href="//github.com/airene/vitepress-blog-pure">Vitepress-blog-pure</a></div><!--]--></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"DcnovyCi\",\"page_2.md\":\"CwFwFepr\",\"page_3.md\":\"BKNsAVD5\",\"pages_about.md\":\"C2XhQ43o\",\"pages_archives.md\":\"CPGv38VQ\",\"pages_category.md\":\"BdIcz0NV\",\"pages_tags.md\":\"BgkLC7Gw\",\"posts_【fpga】axi总线学习.md\":\"CKVgzhEy\",\"posts_【fpga】fpga时序约束.md\":\"YDZ5es_3\",\"posts_【fpga】fpga跨时钟域处理.md\":\"B3z1ermF\",\"posts_【fpga】modelsim仿真.md\":\"5dUPOOQB\",\"posts_【fpga】verilog-编程规范.md\":\"BOh84lce\",\"posts_【fpga】verilog代码模板.md\":\"BjRzJyV4\",\"posts_【fpga】verilog基础.md\":\"DPdzVSZ4\",\"posts_【fpga】verilog状态机基础.md\":\"BHHCPEjO\",\"posts_【fpga】开发板ps部分配置信息.md\":\"MtjqoWTS\",\"posts_【fpga】数字电路基础 - 基础知识.md\":\"qCxBT_Wy\",\"posts_【fpga】数字电路基础 - 时序逻辑.md\":\"BpgiLBSH\",\"posts_【fpga】贴片元件的焊接方法.md\":\"B9mj6xv-\",\"posts_【linux】linux-shell脚本基础.md\":\"BXL_l0WM\",\"posts_【research】mlp的bp推导与实现(上).md\":\"mCNllqNy\",\"posts_【research】mlp的bp推导与实现-下.md\":\"Dus9ptmx\",\"posts_【research】pytorch的张量扩展机制.md\":\"B4l9Be4Y\",\"posts_【research】基础神经网络架构总结.md\":\"CL8Tuj4s\",\"posts_【research】定点数量化.md\":\"C_zWoaYe\",\"posts_【research】浮点数运算.md\":\"DbJ4KCaU\",\"posts_【research】论文结构.md\":\"4HaAwX0A\",\"posts_【skills】2024博客迁移.md\":\"COScXQm7\",\"posts_【skills】c语言函数指针.md\":\"C3jekad2\",\"posts_【skills】docker搭建深度学习环境.md\":\"DYcn1sqO\",\"posts_【skills】git使用基础.md\":\"Ds7BBLWr\",\"posts_【skills】linux创建快捷方式.md\":\"uP6h19AK\",\"posts_【skills】linux炼丹中常用命令总结.md\":\"pG_ZP5U5\",\"posts_【skills】makefile基础.md\":\"BPkpoF9n\",\"posts_【skills】matplotlib笔记.md\":\"Du50jDtu\",\"posts_【skills】pandas教程.md\":\"DLZdwgOY\",\"posts_【skills】pthread并行程序开发.md\":\"65pyA4bv\",\"posts_【skills】python log output.md\":\"CMtjUHWo\",\"posts_【skills】tmux使用总结.md\":\"DGsHsVAY\",\"posts_【skills】tqdm常用方法总结.md\":\"C-_thYms\",\"posts_【skills】vim高效编辑.md\":\"W-LxyBGj\",\"posts_【skills】使用ssh访问github.md\":\"D2yUh2OQ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"NOTE\",\"description\":\"向着200w进发！\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo_main.png\",\"authorName\":\"Jiamingyy\",\"authorAvatar\":\"/avatar.png\",\"authorInfo\":\"CS Ph.D 在读\",\"authorTalk\":\"好好生活，好好科研，好好搞钱！\",\"posts\":[{\"frontMatter\":{\"title\":\"【Skills】2024博客迁移\",\"date\":\"2024-10-03\",\"tags\":[\"vue\",\"Vitepress\",\"Github\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】2024博客迁移.html\"},{\"frontMatter\":{\"date\":\"2023-04-09\",\"title\":\"【Research】基础神经网络架构总结\",\"category\":[\"Research\"],\"tags\":[\"Deep Learning\"]},\"regularPath\":\"/posts/【Research】基础神经网络架构总结.html\"},{\"frontMatter\":{\"title\":\"【FPGA】FPGA时序约束\",\"date\":\"2023-03-22\",\"tags\":[\"数字电路\",\"FPGA\",\"Verilog\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】Modelsim仿真.html\"},{\"frontMatter\":{\"title\":\"【FPGA】FPGA时序约束\",\"date\":\"2023-03-22\",\"tags\":[\"数字电路\",\"FPGA\",\"Verilog\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】FPGA时序约束.html\"},{\"frontMatter\":{\"title\":\"【FPGA】AXI总线学习\",\"date\":\"2023-03-22\",\"tags\":[\"数字电路\",\"FPGA\",\"Verilog\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】AXI总线学习.html\"},{\"frontMatter\":{\"title\":\"【FPGA】FPGA跨时钟域处理\",\"date\":\"2023-03-21\",\"tags\":[\"数字电路\",\"FPGA\",\"Verilog\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】FPGA跨时钟域处理.html\"},{\"frontMatter\":{\"title\":\"【FPGA】verilog代码模板\",\"date\":\"2023-03-13\",\"tags\":[\"数字电路\",\"FPGA\",\"Verilog\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】verilog代码模板.html\"},{\"frontMatter\":{\"title\":\"【Skills】C语言函数指针\",\"date\":\"2022-10-25\",\"tags\":[\"C\",\"Linux\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】C语言函数指针.html\"},{\"frontMatter\":{\"title\":\"【Skills】Matplotlib笔记\",\"date\":\"2022-10-17\",\"tags\":[\"Python\",\"matplotlib\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】Matplotlib笔记.html\"},{\"frontMatter\":{\"title\":\"【Research】定点数量化\",\"date\":\"2022-10-12\",\"tags\":[\"Paper\",\"Writing\"],\"category\":[\"Research\"]},\"regularPath\":\"/posts/【Research】定点数量化.html\"},{\"frontMatter\":{\"title\":\"【FPGA】开发板PS部分配置信息\",\"date\":\"2022-10-08\",\"tags\":[\"数字电路\",\"FPGA\",\"Verilog\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】开发板PS部分配置信息.html\"},{\"frontMatter\":{\"title\":\"【Skills】vim高效编辑\",\"date\":\"2022-09-23\",\"tags\":[\"FPGA\",\"Vim\",\"Verilog\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】vim高效编辑.html\"},{\"frontMatter\":{\"title\":\"【FPGA】verilog编程规范\",\"date\":\"2022-09-19\",\"tags\":[\"数字电路\",\"FPGA\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】verilog-编程规范.html\"},{\"frontMatter\":{\"title\":\"【Research】pytorch的张量扩展机制\",\"date\":\"2022-09-13\",\"tags\":[\"Pytorch\"],\"category\":[\"Research\"]},\"regularPath\":\"/posts/【Research】pytorch的张量扩展机制.html\"},{\"frontMatter\":{\"title\":\"【FPGA】Verilog状态机基础\",\"date\":\"2022-09-10\",\"tags\":[\"数字电路\",\"FPGA\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】Verilog状态机基础.html\"},{\"frontMatter\":{\"title\":\"【Skills】Python Logging 使用总结\",\"date\":\"2022-08-31\",\"tags\":[\"Python\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】Python Log output.html\"},{\"frontMatter\":{\"title\":\"【Research】浮点数运算\",\"date\":\"2022-08-25\",\"tags\":[\"FPGA\",\"Float\"],\"category\":[\"Research\"]},\"regularPath\":\"/posts/【Research】浮点数运算.html\"},{\"frontMatter\":{\"title\":\"【Skills】Git使用基础\",\"date\":\"2022-08-16\",\"tags\":[\"Git\",\"shell\"],\"category\":[\"Skills\"],\"description\":\"系统学习Git的常用命令\"},\"regularPath\":\"/posts/【Skills】Git使用基础.html\"},{\"frontMatter\":{\"title\":\"【Skills】Linux炼丹中常用命令总结\",\"date\":\"2022-08-09\",\"tags\":[\"Linux\",\"shell\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】Linux炼丹中常用命令总结.html\"},{\"frontMatter\":{\"title\":\"【Research】论文写作结构总结\",\"date\":\"2022-07-29\",\"tags\":[\"Paper\",\"Writing\"],\"category\":[\"Research\"]},\"regularPath\":\"/posts/【Research】论文结构.html\"},{\"frontMatter\":{\"date\":\"2022-05-07\",\"title\":\"【FPGA】贴片元件焊接方法\",\"tags\":[\"焊接方法\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】贴片元件的焊接方法.html\"},{\"frontMatter\":{\"title\":\"【Skills】tmux使用总结\",\"date\":\"2022-04-28\",\"tags\":[\"Linux\",\"tmux\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】tmux使用总结.html\"},{\"frontMatter\":{\"title\":\"【Skills】Gnome 创建快捷方式\",\"date\":\"2022-04-28\",\"tags\":[\"Linux\",\"Ubuntu\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】Linux创建快捷方式.html\"},{\"frontMatter\":{\"title\":\"【Skills】tqdm常用方法总结\",\"date\":\"2022-04-27\",\"tags\":[\"Python\",\"tqdm\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】tqdm常用方法总结.html\"},{\"frontMatter\":{\"title\":\"【Skills】pthread并行程序开发基础\",\"date\":\"2022-04-23\",\"tags\":[\"linux\",\"pthread\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】pthread并行程序开发.html\"},{\"frontMatter\":{\"title\":\"【Skills】makefile基础\",\"date\":\"2022-04-11\",\"tags\":[\"linux\",\"makefile\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】makefile基础.html\"},{\"frontMatter\":{\"title\":\"【Linux】linux shell脚本基础\",\"date\":\"2022-04-10\",\"tags\":[\"shell\",\"linux\"],\"category\":[\"Linux\"]},\"regularPath\":\"/posts/【Linux】linux-shell脚本基础.html\"},{\"frontMatter\":{\"title\":\"【Research】MLP的BP推导与实现(下)\",\"date\":\"2022-04-05\",\"tags\":[\"机器学习\",\"BP算法\"],\"category\":[\"Research\"]},\"regularPath\":\"/posts/【Research】MLP的BP推导与实现-下.html\"},{\"frontMatter\":{\"title\":\"【Skills】pandas教程\",\"date\":\"2022-03-29\",\"tags\":[\"数据分析\",\"Pandas\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】pandas教程.html\"},{\"frontMatter\":{\"title\":\"【FPGA】数字电路基础 - 时序逻辑\",\"date\":\"2022-03-17\",\"tags\":[\"数字电路\",\"FPGA\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】数字电路基础 - 时序逻辑.html\"},{\"frontMatter\":{\"title\":\"【FPGA】verilog语法基础\",\"date\":\"2022-03-17\",\"tags\":[\"数字电路\",\"FPGA\",\"Verilog\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】Verilog基础.html\"},{\"frontMatter\":{\"title\":\"【FPGA】数字电路基础 - 基础知识\",\"date\":\"2022-03-16\",\"tags\":[\"数字电路\",\"FPGA\"],\"category\":[\"FPGA\"]},\"regularPath\":\"/posts/【FPGA】数字电路基础 - 基础知识.html\"},{\"frontMatter\":{\"title\":\"【Skills】docker搭建深度学习环境\",\"date\":\"2022-03-13\",\"tags\":[\"Docker\",\"机器学习\"],\"category\":[\"Skills\"]},\"regularPath\":\"/posts/【Skills】docker搭建深度学习环境.html\"},{\"frontMatter\":{\"title\":\"【Skills】Access Github Without Password\",\"date\":\"2022-03-11\",\"tags\":[\"工具使用\",\"Git\"],\"category\":[\"Skills\"],\"description\":\"记录配置使用 git 可以免密访问gtihub\"},\"regularPath\":\"/posts/【Skills】使用SSH访问Github.html\"},{\"frontMatter\":{\"title\":\"【Research】MLP的BP推导与实现-上\",\"date\":\"2022-03-11\",\"tags\":[\"机器学习\",\"BP算法\"],\"category\":[\"Research\"]},\"regularPath\":\"/posts/【Research】MLP的BP推导与实现(上).html\"}],\"website\":\"https://github.com/airene/vitepress-blog-pure\",\"comment\":{\"repo\":\"airene/vitepress-blog-pure\",\"themes\":\"github-light\",\"issueTerm\":\"pathname\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Category\",\"link\":\"/pages/category\"},{\"text\":\"Archives\",\"link\":\"/pages/archives\"},{\"text\":\"Tags\",\"link\":\"/pages/tags\"},{\"text\":\"About\",\"link\":\"/pages/about\"}],\"search\":{\"provider\":\"local\"},\"lastUpdated\":true,\"lastUpdatedText\":\"最新更新\",\"outlineTitle\":\"目录\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/jiamingyy\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>